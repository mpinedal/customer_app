create database Proyecto2Lab2


--TABLA CUSTOMERS
CREATE TABLE [dbo].[TBL_CUSTOMERS]
(
	[ID] NVARCHAR(15) NOT NULL PRIMARY KEY, 
    [NAME] NVARCHAR(50) NOT NULL, 
    [LAST_NAME] NVARCHAR(50) NOT NULL, 
    [DATE_OF_BIRTH] DATE NOT NULL,
	[SEX] NVARCHAR(50) NOT NULL,
    [STATE] NVARCHAR(50) NOT NULL

);

--INSERT EN  CUSTOMERS
CREATE PROCEDURE [dbo].[CRE_CUSTOMER_PR]
	@P_ID nvarchar(25),
	@P_NAME nvarchar(25),
	@P_LAST_NAME nvarchar(25),
	@P_DATE_OF_BIRTH date,
	@P_SEX nvarchar(25),
	@P_STATE nvarchar(25)

AS
	INSERT INTO [dbo].[TBL_CUSTOMERS] VALUES(@P_ID,@P_NAME,@P_LAST_NAME,@P_DATE_OF_BIRTH,@P_SEX,@P_STATE);


--RETRIEVE ALL CUSTOMER
CREATE PROCEDURE [dbo].[RET_ALL_CUSTOMER_PR]
AS
	SELECT ID, NAME, LAST_NAME, DATE_OF_BIRTH, SEX, STATE FROM TBL_CUSTOMERS;


--UPDATE CUSTOMER
CREATE PROCEDURE [dbo].[UPD_CUSTOMER_PR]
	@P_ID nvarchar(25),
	@P_NAME nvarchar(25),
	@P_LAST_NAME nvarchar(25),
	@P_DATE_OF_BIRTH date,
	@P_SEX nvarchar(25),
	@P_STATE nvarchar(25)

AS
	UPDATE [dbo].[TBL_CUSTOMERS] SET NAME= @P_NAME, LAST_NAME=@P_LAST_NAME, DATE_OF_BIRTH=@P_DATE_OF_BIRTH, SEX=@P_SEX, STATE = @P_STATE WHERE ID=@P_ID;

--RET CUSTOMER BY ID
CREATE PROCEDURE [dbo].[RET_CUSTOMER_PR]
	@P_ID nvarchar(25)
AS
	SELECT ID, NAME, LAST_NAME, DATE_OF_BIRTH, SEX, STATE FROM TBL_CUSTOMERS WHERE ID=@P_ID;


--DELETE CUSTOMER
CREATE PROCEDURE [dbo].[DEL_CUSTOMER_PR]
	@P_ID nvarchar(25)
AS
	DELETE FROM TBL_CUSTOMERS WHERE ID=@P_ID;
------------------------------------------------------------------

--TABLA DIRECTIONS
CREATE TABLE [dbo].[TBL_DIRECTIONS]
(
	[OWNER_ID] NVARCHAR(15) NOT NULL, 
    [PROVINCE] NVARCHAR(50) NOT NULL, 
    [CANTON] NVARCHAR(50) NOT NULL, 
    [DISTRITO]NVARCHAR(50) NOT NULL,
	[DETAILS] NVARCHAR(50) NOT NULL,
    [TYPE] NVARCHAR(50) NOT NULL

);

--INSERT EN  DIRECTIONS
CREATE PROCEDURE [dbo].[CRE_DIRECTION_PR]
	@P_OWNER_ID nvarchar(15),
	@P_PROVINCE nvarchar(25),
	@P_CANTON nvarchar(25),
	@P_DISTRITO nvarchar(25),
	@P_DETAILS nvarchar(25),
	@P_TYPE nvarchar(25)

AS
	INSERT INTO [dbo].[TBL_DIRECTIONS] VALUES(@P_OWNER_ID,@P_PROVINCE,@P_CANTON,@P_DISTRITO,@P_DETAILS,@P_TYPE);


	--DROP PROCEDURE UPD_DIRECTION_PR;

--RETRIEVE ALL DIRECTIONS
CREATE PROCEDURE [dbo].[RET_ALL_DIRECTIONS_PR]
AS
	SELECT OWNER_ID, PROVINCE, CANTON, DISTRITO, DETAILS, TYPE FROM [TBL_DIRECTIONS];


--UPDATE DIRECTION
CREATE PROCEDURE [dbo].[UPD_DIRECTION_PR]
	@P_OWNER_ID nvarchar(15),
	@P_PROVINCE nvarchar(25),
	@P_CANTON nvarchar(25),
	@P_DISTRITO nvarchar(25),
	@P_DETAILS nvarchar(25),
	@P_TYPE nvarchar(25)

AS
	UPDATE [dbo].[TBL_DIRECTIONS] SET OWNER_ID = @P_OWNER_ID, PROVINCE=@P_PROVINCE, CANTON=@P_CANTON, DISTRITO=@P_DISTRITO, DETAILS = @P_DETAILS, TYPE = @P_TYPE WHERE OWNER_ID=@P_OWNER_ID;

--RET DIRECTION BY ID
CREATE PROCEDURE [dbo].[RET_DIRECTION_PR]
	@P_OWNER_ID nvarchar(25)
AS
	SELECT OWNER_ID, PROVINCE, CANTON, DISTRITO, DETAILS, TYPE FROM TBL_DIRECTIONS WHERE OWNER_ID=@P_OWNER_ID;


--DELETE DIRECTION
CREATE PROCEDURE [dbo].[DEL_DIRECTION_PR]
	@P_OWNER_ID nvarchar(25)
AS
	DELETE FROM TBL_DIRECTIONS WHERE OWNER_ID=@P_OWNER_ID;


	------------------------------------------------------------------

--TABLA CONTACTMETHODS
CREATE TABLE [dbo].[TBL_CONTACTMETHODS]
(
	[OWNER_ID] NVARCHAR(15) NOT NULL, 
	[TYPE] NVARCHAR(50) NOT NULL, 
	[VALUE] NVARCHAR(50) NOT NULL, 
	[DESCRIPTION] NVARCHAR(50) NOT NULL, 
	[INDPUBLICIDAD] NVARCHAR(50) NOT NULL

   
);

--INSERT EN  DIRECTIONS
CREATE PROCEDURE [dbo].[CRE_CONTACTMETHOD_PR]
	
	@P_OWNER_ID nvarchar(15),
	@P_TYPE nvarchar(25),
	@P_VALUE nvarchar(25),
	@P_DESCRIPTION nvarchar(25),
	@P_INDPUBLICIDAD nvarchar(25)
	

AS
	INSERT INTO [dbo].[TBL_CONTACTMETHODS] VALUES(@P_OWNER_ID,@P_TYPE,@P_VALUE,@P_DESCRIPTION,@P_INDPUBLICIDAD);



--RETRIEVE ALL DIRECTIONS
CREATE PROCEDURE [dbo].[RET_ALL_CONTACTMETHODS_PR]
AS
	SELECT OWNER_ID, TYPE, VALUE, DESCRIPTION, INDPUBLICIDAD FROM [TBL_CONTACTMETHODS];


--UPDATE DIRECTION
CREATE PROCEDURE [dbo].[UPD_CONTACTMETHOD_PR]
	@P_OWNER_ID nvarchar(15),
	@P_TYPE nvarchar(25),
	@P_VALUE nvarchar(25),
	@P_DESCRIPTION nvarchar(25),
	@P_INDPUBLICIDAD nvarchar(25)

AS
	UPDATE [dbo].[TBL_CONTACTMETHODS] SET OWNER_ID = @P_OWNER_ID, TYPE=@P_TYPE, VALUE=@P_VALUE, DESCRIPTION=@P_DESCRIPTION, INDPUBLICIDAD = @P_INDPUBLICIDAD WHERE OWNER_ID=@P_OWNER_ID;

--RET DIRECTION BY ID
CREATE PROCEDURE [dbo].[RET_CONTACTMETHOD_PR]
	@P_OWNER_ID nvarchar(25)
AS
	SELECT OWNER_ID, TYPE, VALUE, DESCRIPTION, INDPUBLICIDAD FROM TBL_CONTACTMETHODS WHERE OWNER_ID=@P_OWNER_ID;


--DELETE DIRECTION
CREATE PROCEDURE [dbo].[DEL_CONTACTMETHOD_PR]
	@P_OWNER_ID nvarchar(25)
AS
	DELETE FROM TBL_CONTACTMETHODS WHERE OWNER_ID=@P_OWNER_ID;
